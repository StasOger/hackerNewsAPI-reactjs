{"ast":null,"code":"import _regeneratorRuntime from\"D:/JsProjects/hacker-news-main/hackerNewsAPI-reactjs/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/JsProjects/hacker-news-main/hackerNewsAPI-reactjs/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/JsProjects/hacker-news-main/hackerNewsAPI-reactjs/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import{BrowserRouter as Router,Link,Outlet,useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Item(){// достаем из url id новости \nvar currentUrl=window.location.href;var localhost3000=\"http://localhost:3000/Item/\";var itemId=currentUrl.replace(localhost3000,\"\");var by=\"\";var _useState=useState([]),_useState2=_slicedToArray(_useState,2),itemGet=_useState2[0],setItem=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),comments=_useState4[0],setCooments=_useState4[1];// const [itemm, setItemm] = useState([])\nvar _useState5=useState(\"programming\"),_useState6=_slicedToArray(_useState5,2),queryy=_useState6[0],setQueryy=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setIsLoadingg=_useState8[1];// loading state\n// const useNavigate = ReactRouterDOM.useNavigate;\nvar navigate=useNavigate();// const useNavigate = ReactRouterDOM.useNavigate;\n// const navigate = useNavigate();\nuseEffect(function(){setIsLoadingg(true);var fetchStory=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var api_story_id,storyInfo,step,_api_story_id,commentInfo;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://hacker-news.firebaseio.com/v0/item/\".concat(itemId,\".json?print=pretty\"));case 2:api_story_id=_context.sent;_context.next=5;return api_story_id.json();case 5:storyInfo=_context.sent;setItem(storyInfo);step=0;case 8:if(!(step<storyInfo.descendants)){_context.next=19;break;}_context.next=11;return fetch(\"https://hacker-news.firebaseio.com/v0/item/\".concat(storyInfo.kids[step],\".json?print=pretty\"));case 11:_api_story_id=_context.sent;_context.next=14;return _api_story_id.json();case 14:commentInfo=_context.sent;if(commentInfo!=null){console.log(commentInfo);setCooments(commentInfo);}case 16:step++;_context.next=8;break;case 19:case\"end\":return _context.stop();}}},_callee);}));return function fetchStory(){return _ref.apply(this,arguments);};}();fetchStory();// setItemm(itemGett)\n// setCoomentss(comments)\nsetIsLoadingg(false);},[queryy]);var author=itemGet.by;var id=itemGet.id;var descendants=itemGet.descendants;var title=itemGet.title;var url=itemGet.url;var time=itemGet.time;var commentId=comments.id;var commentBy=comments.by;var commentText=comments.text;// конвертируем дату из long в date\nvar date=new Date(time*1000);var options={weekday:'long',day:'numeric',year:'numeric',month:'long'};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"article\",{className:\"bg-gray-800 rounded p-3 transition-all duration-150\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"border-b font-bolder text-white text-xl mb-3\",children:\"Home\"})}),/*#__PURE__*/_jsx(Outlet,{}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-white text-lg mb-3\",children:title}),/*#__PURE__*/_jsxs(\"article\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"By \",/*#__PURE__*/_jsx(\"em\",{children:author})]}),/*#__PURE__*/_jsx(\"a\",{href:url,target:\"_blank\",rel:\"noopenner noreferrer\",className:\"border-b border-gray-700 text-gray-600 text-lg hover:text-gray-400 hover:border-gray-400\",children:\"Link\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 mt-10\",children:date.toLocaleDateString(\"en-US\",options)}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-400 mt-10\",children:[\"Comments: \",descendants]})]},id),commentId&&/*#__PURE__*/_jsx(\"div\",{className:\" gap-5 p-5 md:grid-cols-2 container mx-auto lg:max-w-4xl\",children:/*#__PURE__*/_jsxs(\"article\",{className:\"bg-gray-800 rounded p-3 transition-all duration-150\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-white  mb-3\",children:commentText}),/*#__PURE__*/_jsx(\"article\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"By \",/*#__PURE__*/_jsx(\"em\",{children:commentBy})]})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 mt-10\",children:date.toLocaleDateString(\"en-US\",options)})]},commentId)})]});}export default Item;//","map":{"version":3,"sources":["D:/JsProjects/hacker-news-main/hackerNewsAPI-reactjs/src/components/Item.jsx"],"names":["useState","useEffect","BrowserRouter","Router","Link","Outlet","useNavigate","Item","currentUrl","window","location","href","localhost3000","itemId","replace","by","itemGet","setItem","comments","setCooments","queryy","setQueryy","isLoading","setIsLoadingg","navigate","fetchStory","fetch","api_story_id","json","storyInfo","step","descendants","kids","commentInfo","console","log","author","id","title","url","time","commentId","commentBy","commentText","text","date","Date","options","weekday","day","year","month","toLocaleDateString"],"mappings":"kZAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,aAAa,GAAIC,CAAAA,MAA1B,CAAmCC,IAAnC,CAAyCC,MAAzC,CAAiDC,WAAjD,KAAoE,kBAApE,C,wFAGA,QAASC,CAAAA,IAAT,EAAgB,CAEhB;AACE,GAAMC,CAAAA,UAAU,CAAGC,MAAM,CAACC,QAAP,CAAgBC,IAAnC,CACA,GAAMC,CAAAA,aAAa,CAAG,6BAAtB,CACA,GAAMC,CAAAA,MAAM,CAAGL,UAAU,CAACM,OAAX,CAAmBF,aAAnB,CAAkC,EAAlC,CAAf,CACA,GAAIG,CAAAA,EAAE,CAAG,EAAT,CAGA,cAA2Bf,QAAQ,CAAC,EAAD,CAAnC,wCAAOgB,OAAP,eAAgBC,OAAhB,eAEA,eAAgCjB,QAAQ,CAAC,EAAD,CAAxC,yCAAOkB,QAAP,eAAiBC,WAAjB,eAGA;AACA,eAA4BnB,QAAQ,CAAC,aAAD,CAApC,yCAAOoB,MAAP,eAAeC,SAAf,eACA,eAAmCrB,QAAQ,CAAC,IAAD,CAA3C,yCAAOsB,SAAP,eAAkBC,aAAlB,eAAkD;AAClD;AACA,GAAMC,CAAAA,QAAQ,CAAGlB,WAAW,EAA5B,CAEA;AACA;AAEAL,SAAS,CAAC,UAAM,CACdsB,aAAa,CAAC,IAAD,CAAb,CACA,GAAME,CAAAA,UAAU,0FAAG,mNAEjBC,CAAAA,KAAK,sDAAgDb,MAAhD,uBAFY,QACXc,YADW,qCAGOA,CAAAA,YAAY,CAACC,IAAb,EAHP,QAGXC,SAHW,eAKjBZ,OAAO,CAACY,SAAD,CAAP,CAIKC,IAAI,CAAG,CATK,aASFA,IAAI,CAAGD,SAAS,CAACE,WATf,kDAWfL,CAAAA,KAAK,sDAAgDG,SAAS,CAACG,IAAV,CAAeF,IAAf,CAAhD,uBAXU,SAUTH,aAVS,sCAYWA,CAAAA,aAAY,CAACC,IAAb,EAZX,SAYTK,WAZS,eAaf,GAAIA,WAAW,EAAI,IAAnB,CAAwB,CACtBC,OAAO,CAACC,GAAR,CAAYF,WAAZ,EACAd,WAAW,CAACc,WAAD,CAAX,CACD,CAhBc,QAS4BH,IAAI,EAThC,8EAAH,kBAAVL,CAAAA,UAAU,0CAAhB,CAqBAA,UAAU,GACV;AACA;AACAF,aAAa,CAAC,KAAD,CAAb,CACD,CA3BQ,CA2BN,CAACH,MAAD,CA3BM,CAAT,CA6BA,GAAMgB,CAAAA,MAAM,CAAGpB,OAAO,CAACD,EAAvB,CACA,GAAMsB,CAAAA,EAAE,CAAGrB,OAAO,CAACqB,EAAnB,CACA,GAAMN,CAAAA,WAAW,CAAGf,OAAO,CAACe,WAA5B,CACA,GAAMO,CAAAA,KAAK,CAAGtB,OAAO,CAACsB,KAAtB,CACA,GAAMC,CAAAA,GAAG,CAAGvB,OAAO,CAACuB,GAApB,CACA,GAAMC,CAAAA,IAAI,CAAGxB,OAAO,CAACwB,IAArB,CAEA,GAAMC,CAAAA,SAAS,CAAGvB,QAAQ,CAACmB,EAA3B,CACA,GAAMK,CAAAA,SAAS,CAAGxB,QAAQ,CAACH,EAA3B,CACA,GAAM4B,CAAAA,WAAW,CAAGzB,QAAQ,CAAC0B,IAA7B,CAEA;AACA,GAAIC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,IAAJ,CAASN,IAAI,CAAC,IAAd,CAAX,CACA,GAAIO,CAAAA,OAAO,CAAG,CAAEC,OAAO,CAAE,MAAX,CAAmBC,GAAG,CAAE,SAAxB,CAAmCC,IAAI,CAAE,SAAzC,CAAoDC,KAAK,CAAE,MAA3D,CAAd,CAEA,mBAAO,oCACW,iBAEM,SAAS,CAAC,qDAFhB,wBAGI,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,uBACE,WAAI,SAAS,CAAC,8CAAd,kBADF,EAHJ,cAMI,KAAC,MAAD,IANJ,cAQI,WAAI,SAAS,CAAC,mCAAd,UACGb,KADH,EARJ,cAYI,iBAAS,SAAS,CAAC,mCAAnB,wBACE,WAAG,SAAS,CAAC,eAAb,8BACK,oBAAKF,MAAL,EADL,GADF,cAIE,UACE,IAAI,CAAEG,GADR,CAEE,MAAM,CAAC,QAFT,CAGE,GAAG,CAAC,sBAHN,CAIE,SAAS,CAAC,0FAJZ,kBAJF,GAZJ,cA0BA,UAAG,SAAS,CAAC,qBAAb,UACGM,IAAI,CAACO,kBAAL,CAAwB,OAAxB,CAAiCL,OAAjC,CADH,EA1BA,cA6BA,WAAG,SAAS,CAAC,qBAAb,wBACahB,WADb,GA7BA,GACWM,EADX,CADX,CAmCaI,SAAS,eAED,YAAK,SAAS,CAAC,0DAAf,uBAEA,iBAEE,SAAS,CAAC,qDAFZ,wBAIA,WAAI,SAAS,CAAC,4BAAd,UACGE,WADH,EAJA,cAOA,gBAAS,SAAS,CAAC,mCAAnB,uBACE,WAAG,SAAS,CAAC,eAAb,8BACK,oBAAKD,SAAL,EADL,GADF,EAPA,cAaA,UAAG,SAAS,CAAC,qBAAb,UACGG,IAAI,CAACO,kBAAL,CAAwB,OAAxB,CAAiCL,OAAjC,CADH,EAbA,GACON,SADP,CAFA,EArCrB,GAAP,CA4DD,CAED,cAAelC,CAAAA,IAAf,CAiCA","sourcesContent":["import { useState, useEffect } from \"react\"\r\nimport { BrowserRouter as Router,  Link, Outlet, useNavigate } from \"react-router-dom\";\r\n\r\n\r\nfunction Item() {\r\n\r\n// достаем из url id новости \r\n  const currentUrl = window.location.href;\r\n  const localhost3000 = \"http://localhost:3000/Item/\"\r\n  const itemId = currentUrl.replace(localhost3000, \"\")\r\n  let by = \"\";\r\n\r\n  \r\n  const [itemGet, setItem] = useState([])\r\n\r\n  const [comments, setCooments] = useState([])\r\n\r\n  \r\n  // const [itemm, setItemm] = useState([])\r\n  const [queryy, setQueryy] = useState(\"programming\")\r\n  const [isLoading, setIsLoadingg] = useState(true) // loading state\r\n  // const useNavigate = ReactRouterDOM.useNavigate;\r\n  const navigate = useNavigate();\r\n\r\n  // const useNavigate = ReactRouterDOM.useNavigate;\r\n  // const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    setIsLoadingg(true)\r\n    const fetchStory = async () => {\r\n      const api_story_id = await \r\n      fetch (`https://hacker-news.firebaseio.com/v0/item/${itemId}.json?print=pretty`)\r\n      const storyInfo = await api_story_id.json()\r\n\r\n      setItem(storyInfo)\r\n      \r\n      var step;\r\n      \r\n      for (step = 0; step < storyInfo.descendants; step++) {\r\n        const api_story_id = await \r\n        fetch (`https://hacker-news.firebaseio.com/v0/item/${storyInfo.kids[step]}.json?print=pretty`)\r\n        const commentInfo = await api_story_id.json()\r\n        if (commentInfo != null){\r\n          console.log(commentInfo)\r\n          setCooments(commentInfo)\r\n        }\r\n      }\r\n      \r\n    }\r\n\r\n    fetchStory()\r\n    // setItemm(itemGett)\r\n    // setCoomentss(comments)\r\n    setIsLoadingg(false)\r\n  }, [queryy]);\r\n\r\n  const author = itemGet.by; \r\n  const id = itemGet.id; \r\n  const descendants = itemGet.descendants; \r\n  const title = itemGet.title; \r\n  const url = itemGet.url; \r\n  const time = itemGet.time; \r\n  \r\n  const commentId = comments.id;\r\n  const commentBy = comments.by; \r\n  const commentText = comments.text; \r\n\r\n  // конвертируем дату из long в date\r\n  let date = new Date(time*1000);\r\n  let options = { weekday: 'long', day: 'numeric', year: 'numeric', month: 'long' };\r\n  \r\n  return <div>\r\n                    <article\r\n                          key={id}\r\n                          className=\"bg-gray-800 rounded p-3 transition-all duration-150\">\r\n                        <Link to=\"/\">\r\n                          <h3 className=\"border-b font-bolder text-white text-xl mb-3\">Home</h3>\r\n                        </Link>\r\n                        <Outlet />\r\n                      \r\n                        <h3 className=\"font-bold text-white text-lg mb-3\">\r\n                          {title}\r\n                        </h3> \r\n        \r\n                        <article className=\"flex items-center justify-between\">\r\n                          <p className=\"text-gray-600\">\r\n                            By <em>{author}</em>\r\n                          </p>\r\n                          <a\r\n                            href={url}\r\n                            target=\"_blank\"\r\n                            rel=\"noopenner noreferrer\"\r\n                            className=\"border-b border-gray-700 text-gray-600 text-lg hover:text-gray-400 hover:border-gray-400\"\r\n                          >\r\n                            Link\r\n                          </a>\r\n                    \r\n                    </article>\r\n                    <p className=\"text-gray-400 mt-10\">\r\n                      {date.toLocaleDateString(\"en-US\", options)}\r\n                    </p>\r\n                    <p className=\"text-gray-400 mt-10\">\r\n                      Comments: {descendants}\r\n                    </p>\r\n                  </article> \r\n                  {\r\n                      commentId &&\r\n                        (\r\n                              <div className=\" gap-5 p-5 md:grid-cols-2 container mx-auto lg:max-w-4xl\">\r\n                              \r\n                              <article\r\n                                key={commentId}\r\n                                className=\"bg-gray-800 rounded p-3 transition-all duration-150\"\r\n                              >\r\n                              <h4 className=\"font-bold text-white  mb-3\">\r\n                                {commentText}\r\n                              </h4>      \r\n                              <article className=\"flex items-center justify-between\">\r\n                                <p className=\"text-gray-600\">\r\n                                  By <em>{commentBy}</em>\r\n                                </p>\r\n                              </article>\r\n                                \r\n                              <p className=\"text-gray-400 mt-10\">\r\n                                {date.toLocaleDateString(\"en-US\", options)}\r\n                              </p>\r\n                              </article>\r\n                            </div>\r\n                        )\r\n                  }\r\n    </div>   \r\n}\r\n\r\nexport default Item;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// "]},"metadata":{},"sourceType":"module"}